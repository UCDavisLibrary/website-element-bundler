(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1:function(e,t,n){"use strict";var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(8);n(18),n(20),n(19),n(17),n(66),n(56),n(52),n(51);var i=c(n(50)),s=c(n(49)),l=c(n(48));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Mixin(a.PolymerElement).with(l.default)),o(t,null,[{key:"template",get:function(){return(0,a.html)([i.default+s.default])}},{key:"is",get:function(){return"library-search-db"}},{key:"properties",get:function(){return{subjects:{type:Array,value:[]},materials:{type:Array,value:[]},verbose:{type:Boolean},library_url:{type:String,value:"https://www.library.ucdavis.edu"},api_base_url:{type:String,value:"/wp-json"},api_materials_url:{type:String,value:"/wp/v2/material"},api_subjects_url:{type:String,value:"/wp/v2/ucd-subject"},vpn_url:{type:String,computed:"_vpn_url(library_url)"},url_args:{type:Object,computed:"getUrlVars()"},query:{type:Object},a11y_target:{type:Object}}}},{key:"observers",get:function(){return["_query_change(query.*)"]}}]),o(t,[{key:"ready",value:function(){(function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(r):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),this.verbose&&console.log("Advanced database search widget loaded."),this.a11y_target=this.$.db_search_input;var e=this;this.reset_query(),this.fetch_filters();var n={},o=!0,a=!1,i=void 0;try{for(var s,l=Object.entries(this.url_args)[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=s.value,u=r(c,2),d=u[0],p=u[1];Object.keys(this.query).includes(d)&&(n[d]=p)}}catch(e){a=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw i}}if(Object.keys(n).length>0){var b=!0,h=!1,y=void 0;try{for(var f,_=Object.entries(n)[Symbol.iterator]();!(b=(f=_.next()).done);b=!0){var v=f.value,g=r(v,2),m=g[0],w=g[1];"everyone"!=m&&"vpn"!=m||(w=!1),"s"==m&&(this.$.db_search_input.bindValue=w),this.set("query."+m,w)}}catch(e){h=!0,y=e}finally{try{!b&&_.return&&_.return()}finally{if(h)throw y}}}this.verbose&&(console.log("URL Args: ",this.url_args),console.log("Recognized URL args",n)),this.$.db_search_input.addEventListener("iron-input-validate",function(){e.set("query.s",e.$.db_search_input.bindValue)})}},{key:"reset_query",value:function(){this.set("query",{s:"",dbmaterial:"any",dbsubject:"any",everyone:!0,vpn:!0}),this.$.materials_button.textContent="Any Material",this.$.subjects_button.textContent="Any Subject"}},{key:"submit_query",value:function(){var e=!1;if(""==this.query.s)var t=this.library_url+"/database/?";else{t=this.library_url+"/?post_type=database";t+="&s="+encodeURIComponent(this.query.s),e=!0}"any"!=this.query.dbmaterial&&(e&&(t+="&"),e=!0,t+="dbmaterial="+encodeURIComponent(this.query.dbmaterial)),"any"!=this.query.dbsubject&&(e&&(t+="&"),e=!0,t+="dbsubject="+encodeURIComponent(this.query.dbsubject)),0==this.query.everyone&&(e&&(t+="&"),e=!0,t+="everyone=false"),0==this.query.vpn&&(e&&(t+="&"),e=!0,t+="vpn=false"),this.verbose&&console.log(t),window.location=t}},{key:"fetch_filters",value:function(){this.$.ajax_materials.url=this.library_url+this.api_base_url+this.api_materials_url+"?per_page=100",this.$.ajax_subjects.url=this.library_url+this.api_base_url+this.api_subjects_url+"?per_page=100",this.verbose&&(console.log("Fetching materials list from",this.$.ajax_materials.url),console.log("Fetching subjects list from",this.$.ajax_subjects.url),this.$.ajax_materials.verbose=!0,this.$.ajax_subjects.verbose=!0);var e=this.$.ajax_materials.generateRequest(),t=this.$.ajax_subjects.generateRequest(),n=this;this.materials=[{name:"Any Material",slug:"any",id:0}],e.completes.then(function(e){var t=e.response,r=!0,o=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var l=i.value;l.count<=0||(l.slug==n.query.dbmaterial&&(n.$.materials_button.textContent=l.name),n.push("materials",l))}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}n.verbose&&console.log("Materials List: ",n.materials)},function(e){}),this.subjects=[{name:"Any Subject",slug:"any",id:0}],t.completes.then(function(e){var t=e.response,r=!0,o=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var l=i.value;l.count<=0||0==l.parent||(l.slug==n.query.dbsubject&&(n.$.subjects_button.textContent=l.name),n.push("subjects",l))}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}n.verbose&&console.log("Subjects List: ",n.subjects)},function(e){})}},{key:"getUrlVars",value:function(){var e={};decodeURIComponent(window.location.href).replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,n,r){e[n]=r});return e}},{key:"_vpn_url",value:function(e){return e+"/service/connect-from-off-campus"}},{key:"_toggle_checkbox",value:function(e){var t=e.target.getAttribute("id"),n="query."+t.split("_")[1];this.set(n,this.$[t].checked)}},{key:"_query_change",value:function(){this.verbose&&console.log("Query changed: ",this.query)}},{key:"_open_dropdown",value:function(e){var t=e.target.getAttribute("drop_type");"materials"==t?this.$.drop_materials.open():"subjects"==t&&this.$.drop_subjects.open()}},{key:"_select_dropdown",value:function(e){var t=e.target.getAttribute("drop_type"),n=e.target.getAttribute("slug"),r=e.target.textContent;"materials"==t?(this.$.materials_button.textContent=r,this.$.drop_materials.close(),this.set("query.dbmaterial",n)):"subjects"==t&&(this.$.subjects_button.textContent=r,this.$.drop_subjects.close(),this.set("query.dbsubject",n))}}]),t}();customElements.define(u.is,u)},48:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(r):void 0};t.default=function(e){return function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),r(n,[{key:"_attachDom",value:function(e){if(window.ShadyDOM&&window.ShadyDOM.inUse)return o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_attachDom",this).call(this,e);for(var t=e.querySelectorAll("style"),r=0;r<t.length;r++)t[r].parentNode.removeChild(t[r]),this._stylesInserted||(t[r].setAttribute("id",this.nodeName.toLowerCase()+"-styles"),document.head.appendChild(t[r]));return this.appendChild(e),e}},{key:"querySelector",value:function(e){return this.shadowRoot?this.shadowRoot.querySelector(e):o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"querySelector",this).call(this,e)}},{key:"querySelectorAll",value:function(e){return this.shadowRoot?this.shadowRoot.querySelectorAll(e):o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"querySelectorAll",this).call(this,e)}}]),n}()}},49:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default='\n<style>\n    :host {\n        width: 100%;\n        min-width: 450px;\n    }\n    library-search-db .help {\n        padding-bottom: 20px;\n    }\n    library-search-db iron-label {\n        font-weight: 600;\n        display: block;\n        margin-bottom: 6px;\n    }\n    library-search-db iron-label.ontop {\n        width:100%;\n    }\n    library-search-db .dbsearch_row {\n        display: flex;\n        flex-flow: row wrap;\n    }\n    library-search-db iron-dropdown {\n        width: 250px;\n    }\n    library-search-db .search-btn {\n        text-align: center;\n        display: inline-block;\n        background: #002655;\n        color: #fff;\n        text-decoration: none;\n        padding: 15px;\n        font-weight: 600;\n        font-size: 1rem;\n        line-height: 1.25;\n        border: 1px solid transparent;\n        cursor: pointer;\n        border-radius: 0;\n    }\n    library-search-db #db_search_input {\n        flex: 1;\n    }\n    library-search-db #db_search_input input {\n        box-sizing: border-box;\n        display: block;\n        background-color: #e5e9ef;\n        padding: 15px;\n        color: #002655;\n        border: 1px solid #ccd4e0;\n        border-radius: 0;\n        font-weight: 600;\n        font-size: 1rem;\n        line-height: 1.25;\n        width: 100%;\n        min-width: 350px;\n    }\n    library-search-db #db_search_cont {\n        flex: 1;\n        margin-top: 15px;\n    }\n    library-search-db #db_search_cont #input_and_button {\n        display: flex;\n    }\n    library-search-db .dbsearch-drop {\n        margin-right: 15px;\n        margin-top: 15px;\n        width: 250px;\n        position: relative;\n    }\n    library-search-db .dbsearch_button {\n        background: #DAAA00;\n        color: #002655;\n        min-width: 250px;\n        padding: 5px;\n        padding-left: 15px;\n        padding-right: 25px;\n        font-size: 1rem;\n        border: 1px solid transparent;\n        cursor: pointer;\n        border-radius: 0;\n        text-align: left;\n        font-weight: 400;\n        height: 53px;\n        width: 100%;\n        line-height: 40px;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    }\n    library-search-db .dbsearch-drop button:hover {\n        background: #E9CC66;\n    }\n    [slot="dropdown-content"] {\n        background-color: #DAAA00;\n        color: #002655;\n        line-height: 20px;\n        border-radius: 3px;\n        box-shadow: 0px 2px 6px #ccc;\n    }\n    library-search-db .dbsearch-drop li {\n        padding: 5px;\n        padding-left: 15px;\n        font-size: 1rem;\n        border: 1px solid transparent;\n        cursor: pointer;\n        border-radius: 0;\n        text-align: left;\n        font-weight: 400;\n        text-decoration: none;\n    }\n    library-search-db .dbsearch-drop ul {\n        list-style-type: none;\n        padding: 0;\n    }\n    library-search-db .dbsearch-drop li:hover {\n        background-color: #E9CC66;\n    }\n    library-search-db .check_cont {\n        display: inline-block;\n        position: relative;\n        padding-left: 30px;\n        margin-bottom: 0px;\n        cursor: pointer;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        margin-top: 0px;\n        margin-left: 15px;\n    }\n    library-search-db .check_cont input {\n        position: absolute;\n        opacity: 0;\n        cursor: pointer;\n        height: 0;\n        width: 0;\n    }\n    library-search-db .checkmark_styled {\n        position: absolute;\n        top: 0;\n        left: 0;\n        height: 20px;\n        width: 20px;\n        background-color: #fff;\n        border: 1px solid #d8d8d8;\n    }\n    library-search-db .check_cont:hover input ~ .checkmark_styled {\n        background-color: #002655;\n    }\n    library-search-db .check_cont input:checked ~ .checkmark_styled {\n        background-color: #002655;\n    }\n    library-search-db .checkmark_styled:after {\n        content: "";\n        position: absolute;\n        display: none;\n    }\n    library-search-db .check_cont input:checked ~ .checkmark_styled:after {\n        display: block;\n    }\n    library-search-db .check_cont .checkmark_styled:after {\n        left: 7px;\n        top: 2px;\n        width: 7px;\n        height: 12px;\n        border: solid white;\n        border-width: 0 2px 2px 0;\n        -webkit-transform: rotate(45deg);\n        -ms-transform: rotate(45deg);\n        transform: rotate(45deg);\n    }\n    library-search-db .arrowdown {\n        margin-right: 12px;\n        width: 0px;\n        height: 0px;\n        border-left: 6px solid transparent;\n        border-right: 6px solid transparent;\n        border-top: 8px solid #002655;\n        display: inline-block;\n        pointer-events: none;\n        position: absolute;\n        right: 0px;\n        bottom: 22px;\n    }\n    @media(max-width: 570px){\n        library-search-db .dbsearch-drop {\n            width: 100%;\n            margin-right: 0px;\n        }\n        library-search-db #db_search_input input {\n            min-width: 100px;\n        }\n        library-search-db iron-dropdown {\n            width: 100%;\n        }\n    }\n</style>\n'},50:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default='\n  <iron-ajax\n      id="ajax_materials"\n      handle-as="json"\n      rejectWithRequest\n      debounce-duration="300">\n  </iron-ajax>\n  <iron-ajax\n      id="ajax_subjects"\n      handle-as="json"\n      rejectWithRequest\n      debounce-duration="300">\n  </iron-ajax>\n  <h1 class="title">Database Search</h1>\n  <div class="help">Find databases for scholarly articles, newspapers, popular literature, properties, statistics, images, dissertations and more.</div>\n  <div class="dbsearch_row">\n      <iron-label for="availability_cont">Available to:</iron-label>\n      <div id="availability_cont">\n        <label class="check_cont">Everyone\n          <input type="checkbox" id="check_everyone" on-click="_toggle_checkbox" checked$={{query.everyone}}>\n          <span class="checkmark_styled"></span>\n        </label>\n        <label class="check_cont">UC Davis Campus (or <a href$="[[vpn_url]]">VPN</a>)\n          <input type="checkbox" id="check_vpn" on-click="_toggle_checkbox" checked$={{query.vpn}}>\n          <span class="checkmark_styled"></span>\n        </label>\n      </div>\n  </div>\n  <div class="dbsearch_row">\n      <div class="dbsearch-drop">\n        <iron-label for="subjects_button" class="ontop">Subjects</iron-label>\n        <div class="dbsearch_button"\n             id="subjects_button"\n             on-click="_open_dropdown"\n             drop_type="subjects"\n             role="button">Any Subject\n        </div>\n        <div class="arrowdown"></div>\n        <iron-dropdown id="drop_subjects" horizontal-align="left" vertical-align="top">\n          <ul slot="dropdown-content" tabindex="0">\n            <template is="dom-repeat" items = "[[subjects]]" as="subject">\n              <li on-click="_select_dropdown" drop_type="subjects" slug$=[[subject.slug]]>[[subject.name]]</li>\n            </template>\n          </ul>\n        </iron-dropdown>\n      </div>\n      <div class="dbsearch-drop">\n        <iron-label for="materials_button" class="ontop">Materials</iron-label>\n        <div class="dbsearch_button"\n             id="materials_button"\n             on-click="_open_dropdown"\n             drop_type="materials"\n             role="button">Any Material\n        </div>\n        <div class="arrowdown"></div>\n        <iron-dropdown id="drop_materials" horizontal-align="left" vertical-align="top">\n          <ul slot="dropdown-content" tabindex="0">\n            <template is="dom-repeat" items = "[[materials]]" as="material">\n              <li on-click="_select_dropdown" drop_type="materials" slug$=[[material.slug]]>[[material.name]]</li>\n            </template>\n          </ul>\n        </iron-dropdown>\n      </div>\n      <div id="db_search_cont">\n        <iron-a11y-keys id="db_a11y"\n                        target="[[a11y_target]]"\n                        keys="enter"\n                        on-keys-pressed="submit_query">\n        </iron-a11y-keys>\n        <iron-label for="db_search_input" class="ontop">Database Title or Keyword</iron-label>\n        <div id="input_and_button">\n            <iron-input id="db_search_input"\n                        bind-value={{BindValue}}\n                        auto-validate>\n              <input value="{{BindValue::input}}"\n                     placeholder="Search for Databases">\n            </iron-input>\n            <button id="db_search_submit" class="search-btn" on-click="submit_query">Search</button>\n        </div>\n      </div>\n  </div>\n'}}]);