(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{13:function(e,t,s){"use strict";var r=s(6),n=s(8);
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
Object(n.a)({is:"iron-request",hostAttributes:{hidden:!0},properties:{xhr:{type:Object,notify:!0,readOnly:!0,value:function(){return new XMLHttpRequest}},response:{type:Object,notify:!0,readOnly:!0,value:function(){return null}},status:{type:Number,notify:!0,readOnly:!0,value:0},statusText:{type:String,notify:!0,readOnly:!0,value:""},completes:{type:Object,readOnly:!0,notify:!0,value:function(){return new Promise(function(e,t){this.resolveCompletes=e,this.rejectCompletes=t}.bind(this))}},progress:{type:Object,notify:!0,readOnly:!0,value:function(){return{}}},aborted:{type:Boolean,notify:!0,readOnly:!0,value:!1},errored:{type:Boolean,notify:!0,readOnly:!0,value:!1},timedOut:{type:Boolean,notify:!0,readOnly:!0,value:!1}},get succeeded(){if(this.errored||this.aborted||this.timedOut)return!1;var e=this.xhr.status||0;return 0===e||e>=200&&e<300},send:function(e){var t=this.xhr;if(t.readyState>0)return null;t.addEventListener("progress",function(e){this._setProgress({lengthComputable:e.lengthComputable,loaded:e.loaded,total:e.total}),this.fire("iron-request-progress-changed",{value:this.progress})}.bind(this)),t.addEventListener("error",function(t){this._setErrored(!0),this._updateStatus();var s=e.rejectWithRequest?{error:t,request:this}:t;this.rejectCompletes(s)}.bind(this)),t.addEventListener("timeout",function(t){this._setTimedOut(!0),this._updateStatus();var s=e.rejectWithRequest?{error:t,request:this}:t;this.rejectCompletes(s)}.bind(this)),t.addEventListener("abort",function(){this._setAborted(!0),this._updateStatus();var t=new Error("Request aborted."),s=e.rejectWithRequest?{error:t,request:this}:t;this.rejectCompletes(s)}.bind(this)),t.addEventListener("loadend",function(){if(this._updateStatus(),this._setResponse(this.parseResponse()),this.succeeded)this.resolveCompletes(this);else{var t=new Error("The request failed with status code: "+this.xhr.status),s=e.rejectWithRequest?{error:t,request:this}:t;this.rejectCompletes(s)}}.bind(this)),this.url=e.url;var s=!1!==e.async;t.open(e.method||"GET",e.url,s);var n={json:"application/json",text:"text/plain",html:"text/html",xml:"application/xml",arraybuffer:"application/octet-stream"}[e.handleAs],i=e.headers||Object.create(null),o=Object.create(null);for(var a in i)o[a.toLowerCase()]=i[a];if(i=o,n&&!i.accept&&(i.accept=n),Object.keys(i).forEach(function(e){/[A-Z]/.test(e)&&r.a._error("Headers must be lower case, got",e),t.setRequestHeader(e,i[e])},this),s){t.timeout=e.timeout;var u=e.handleAs;!e.jsonPrefix&&u||(u="text"),t.responseType=t._responseType=u,e.jsonPrefix&&(t._jsonPrefix=e.jsonPrefix)}t.withCredentials=!!e.withCredentials;var l=this._encodeBodyObject(e.body,i["content-type"]);return t.send(l),this.completes},parseResponse:function(){var e=this.xhr,t=e.responseType||e._responseType,s=!this.xhr.responseType,r=e._jsonPrefix&&e._jsonPrefix.length||0;try{switch(t){case"json":if(s||void 0===e.response)try{return JSON.parse(e.responseText)}catch(t){return console.warn("Failed to parse JSON sent from "+e.responseURL),null}return e.response;case"xml":return e.responseXML;case"blob":case"document":case"arraybuffer":return e.response;case"text":default:if(r)try{return JSON.parse(e.responseText.substring(r))}catch(t){return console.warn("Failed to parse JSON sent from "+e.responseURL),null}return e.responseText}}catch(e){this.rejectCompletes(new Error("Could not parse response. "+e.message))}},abort:function(){this._setAborted(!0),this.xhr.abort()},_encodeBodyObject:function(e,t){if("string"==typeof e)return e;var s=e;switch(t){case"application/json":return JSON.stringify(s);case"application/x-www-form-urlencoded":return this._wwwFormUrlEncode(s)}return e},_wwwFormUrlEncode:function(e){if(!e)return"";var t=[];return Object.keys(e).forEach(function(s){t.push(this._wwwFormUrlEncodePiece(s)+"="+this._wwwFormUrlEncodePiece(e[s]))},this),t.join("&")},_wwwFormUrlEncodePiece:function(e){return null!==e&&void 0!==e&&e.toString?encodeURIComponent(e.toString().replace(/\r?\n/g,"\r\n")).replace(/%20/g,"+"):""},_updateStatus:function(){this._setStatus(this.xhr.status),this._setStatusText(void 0===this.xhr.statusText?"":this.xhr.statusText)}}),
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
Object(n.a)({is:"iron-ajax",hostAttributes:{hidden:!0},properties:{url:{type:String},params:{type:Object,value:function(){return{}}},method:{type:String,value:"GET"},headers:{type:Object,value:function(){return{}}},contentType:{type:String,value:null},body:{type:Object,value:null},sync:{type:Boolean,value:!1},handleAs:{type:String,value:"json"},withCredentials:{type:Boolean,value:!1},timeout:{type:Number,value:0},auto:{type:Boolean,value:!1},verbose:{type:Boolean,value:!1},lastRequest:{type:Object,notify:!0,readOnly:!0},lastProgress:{type:Object,notify:!0,readOnly:!0},loading:{type:Boolean,notify:!0,readOnly:!0},lastResponse:{type:Object,notify:!0,readOnly:!0},lastError:{type:Object,notify:!0,readOnly:!0},activeRequests:{type:Array,notify:!0,readOnly:!0,value:function(){return[]}},debounceDuration:{type:Number,value:0,notify:!0},jsonPrefix:{type:String,value:""},bubbles:{type:Boolean,value:!1},rejectWithRequest:{type:Boolean,value:!1},_boundHandleResponse:{type:Function,value:function(){return this._handleResponse.bind(this)}}},observers:["_requestOptionsChanged(url, method, params.*, headers, contentType, body, sync, handleAs, jsonPrefix, withCredentials, timeout, auto)"],created:function(){this._boundOnProgressChanged=this._onProgressChanged.bind(this)},get queryString(){var e,t,s=[];for(e in this.params)if(t=this.params[e],e=window.encodeURIComponent(e),Array.isArray(t))for(var r=0;r<t.length;r++)s.push(e+"="+window.encodeURIComponent(t[r]));else null!==t?s.push(e+"="+window.encodeURIComponent(t)):s.push(e);return s.join("&")},get requestUrl(){var e=this.queryString,t=this.url||"";return e?t+(t.indexOf("?")>=0?"&":"?")+e:t},get requestHeaders(){var e,t={},s=this.contentType;if(null==s&&"string"==typeof this.body&&(s="application/x-www-form-urlencoded"),s&&(t["content-type"]=s),"object"==typeof this.headers)for(e in this.headers)t[e]=this.headers[e].toString();return t},_onProgressChanged:function(e){this._setLastProgress(e.detail.value)},toRequestOptions:function(){return{url:this.requestUrl||"",method:this.method,headers:this.requestHeaders,body:this.body,async:!this.sync,handleAs:this.handleAs,jsonPrefix:this.jsonPrefix,withCredentials:this.withCredentials,timeout:this.timeout,rejectWithRequest:this.rejectWithRequest}},generateRequest:function(){var e=document.createElement("iron-request"),t=this.toRequestOptions();return this.push("activeRequests",e),e.completes.then(this._boundHandleResponse).catch(this._handleError.bind(this,e)).then(this._discardRequest.bind(this,e)),this.fire("iron-ajax-presend",{request:e,options:t},{bubbles:this.bubbles,cancelable:!0}).defaultPrevented?(e.abort(),e.rejectCompletes(e),e):(this.lastRequest&&this.lastRequest.removeEventListener("iron-request-progress-changed",this._boundOnProgressChanged),e.addEventListener("iron-request-progress-changed",this._boundOnProgressChanged),e.send(t),this._setLastProgress(null),this._setLastRequest(e),this._setLoading(!0),this.fire("request",{request:e,options:t},{bubbles:this.bubbles,composed:!0}),this.fire("iron-ajax-request",{request:e,options:t},{bubbles:this.bubbles,composed:!0}),e)},_handleResponse:function(e){e===this.lastRequest&&(this._setLastResponse(e.response),this._setLastError(null),this._setLoading(!1)),this.fire("response",e,{bubbles:this.bubbles,composed:!0}),this.fire("iron-ajax-response",e,{bubbles:this.bubbles,composed:!0})},_handleError:function(e,t){this.verbose&&r.a._error(t),e===this.lastRequest&&(this._setLastError({request:e,error:t,status:e.xhr.status,statusText:e.xhr.statusText,response:e.xhr.response}),this._setLastResponse(null),this._setLoading(!1)),this.fire("iron-ajax-error",{request:e,error:t},{bubbles:this.bubbles,composed:!0}),this.fire("error",{request:e,error:t},{bubbles:this.bubbles,composed:!0})},_discardRequest:function(e){var t=this.activeRequests.indexOf(e);t>-1&&this.splice("activeRequests",t,1)},_requestOptionsChanged:function(){this.debounce("generate-request",function(){null!=this.url&&this.auto&&this.generateRequest()},this.debounceDuration)}})},2:function(e,t,s){"use strict";s.r(t);var r=s(9);s(18),s(13);const n=document.createElement("template");n.innerHTML="\n<style>\nlibrary-hours-single .keep-together{\n    white-space: nowrap;\n}\nlibrary-hours-single .open-status{\n    display: flex;\n    align-items:center;\n}\nlibrary-hours-single .status-icon{\n    margin-right: 8px;\n    margin-left: 8px;\n    margin-bottom: inherit !important;\n    width: 25px;\n    height: 25px;\n    min-width: 25px;\n    min-height: 25px;\n}\nlibrary-hours-single .open-hours{\n    padding-left: 41px;\n}\n\n</style>",document.head.appendChild(n.content);var i=e=>(class extends e{_attachDom(e){if(window.ShadyDOM&&window.ShadyDOM.inUse)return super._attachDom(e);let t=e.querySelectorAll("style");for(var s=0;s<t.length;s++)t[s].parentNode.removeChild(t[s]),this._stylesInserted||(t[s].setAttribute("id",this.nodeName.toLowerCase()+"-styles"),document.head.appendChild(t[s]));return this.appendChild(e),e}querySelector(e){return this.shadowRoot?this.shadowRoot.querySelector(e):super.querySelector(e)}querySelectorAll(e){return this.shadowRoot?this.shadowRoot.querySelectorAll(e):super.querySelectorAll(e)}});class o extends(Mixin(r.a).with(i)){static get template(){return r["b"]`
    <iron-ajax
        id$="[[search_term]]"
        url$="[[endpoint]]"
        params$="[[api_params]]"
        handle-as="json"
        on-response="handle_response"
        debounce-duration="300">
    </iron-ajax>
    <span class="open-status">
        <img  class="status-icon" src$=[[status_icon]] alt$=[[status]]>
        <strong>[[status_str]]</strong>
    </span>
    <div class="open-hours">
        <span class="keep-together">[[todays_hours.open]]</span>
        <span class="keep-together">[[todays_hours.close]]</span>
    </div>

        `}static get is(){return"library-hours-single"}static get properties(){return{verbose:{type:Boolean},today:{type:Date},endpoint:{type:String},key:{type:String},search_term:{type:String},api_params:{type:Object},status:{type:String},status_str:{type:String},status_icon:{type:String},todays_hours:{type:Object},icon_dir:{type:String,value:""}}}constructor(){super()}ready(){super.ready();try{var e=(new Date).toLocaleString("en-US",{timeZone:"America/Los_Angeles"});e=new Date(e.split(",")[0]),this.today=e}catch(t){e=this._ie_today(),this.today=e}this.verbose&&console.log("today",this.today),String.prototype.includes||(String.prototype.includes=function(e,t){return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)});var t={key:this.key,q:this.search_term,singleEvents:!0},s=this.today.toJSON().split("T")[0]+"T22:00:00-07:00";t.timeMax=s;var r=this.today.toJSON().split("T")[0]+"T02:00:00-07:00";t.timeMin=r,this.api_params=t,this.verbose&&console.log("api_params",t),this.querySelector("#"+this.search_term).generateRequest()}handle_response(e){var t=e.detail.response;if(this.verbose&&console.log("raw response",t),t.items.length<1)this.set("status","lib-closed"),this.set("status_icon",this.icon_dir+"closed-lib.svg");else{t.items.length>1&&console.log(`More than one event retrieved for ${this.search_term}. Displaying first item.`);var s=t.items[0],r={};if("dateTime"in s.start){var n=this._split_datetime(s.start.dateTime);r.start_date=n.date,r.start_time=n.time,r.end_time=this._split_datetime(s.end.dateTime).time}else r.start_date=new Date(this.today),r.start_time="00:00",r.end_time="00:00";this._open_now(r)?(this.set("status","lib-open"),this.set("status_icon",this.icon_dir+"open-lib.svg")):(this.set("status","lib-closed"),this.set("status_icon",this.icon_dir+"closed-lib.svg"))}if("lib-closed"==this.status)this.set("status_str","Currently CLOSED"),this.set("todays_hours",{open:"",close:""});else{this.set("status_str","Currently OPEN");var i=this._hours_string(r);this.set("todays_hours",i)}}_ie_today(){for(var e=new Date,t=e.getTime()+6e4*e.getTimezoneOffset(),s=new Date(t+-252e5),r=new Date(t+-288e5),n=[new Date(2015,2,8),new Date(2015,10,2),new Date(2016,2,13),new Date(2016,10,7),new Date(2017,2,12),new Date(2017,10,6),new Date(2018,2,11),new Date(2018,10,5),new Date(2019,2,10),new Date(2019,10,4),new Date(2020,2,8),new Date(2020,10,2),new Date(2021,2,14),new Date(2021,10,8),new Date(2022,2,13),new Date(2022,10,7),new Date(2023,2,12),new Date(2023,10,6),new Date(2024,2,10),new Date(2024,10,4)],i=0;i<n.length;i++)if(r<n[i])return s;return console.log("Unable to determine daylight savings time. See _ie_today function"),e}_split_datetime(e){var t={},s=e.split("T");s[0].split("-");return t.date=new Date(s[0]),t.time=s[1].substr(0,5),t}_hours_string(e){for(var t={},s=[e.start_time,e.end_time],r=0;r<2;r++){var n="",i=s[r].split(":"),o=parseInt(i[0]);if(o>12){o-=12;var a="pm"}else if(0==o){o=12;a="am"}else if(12==o){o=12;a="pm"}else a="am";n+=o.toString()+":"+i[1],n+=" "+a,0==r?t.open="Today: "+n+" -":t.close=n}return t}_open_now(e){try{var t=(s=(new Date).toLocaleString("en-GB",{timeZone:"America/Los_Angeles"})).split(",")[1].split(":");t=parseInt(t[0]+t[1])}catch(e){var s=this._ie_today(),r=String(s.getHours());1==r.length&&(r="0"+r);var n=String(s.getMinutes());1==n.length&&(n="0"+n);t=parseInt(r+n)}var i=e.start_time.split(":");i=parseInt(i[0]+i[1]);var o=e.end_time.split(":");return o=parseInt(o[0]+o[1]),t>=i&&t<o||t>=i&&i>=o}}customElements.define(o.is,o)}}]);